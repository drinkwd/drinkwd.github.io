---
title: 不得不学的图标引入🎡
date: 2021-02-25 09:03:38
tags: [Vue, React, IconFont]
categories: 技术
index_img: /img/blog_img/index5.jpg
banner_img: /img/blog_img/banner5.jpg
---

#  坚强的信心，能使平凡的人做出惊人的事业👻


## 前言
为什么要使用字体图标，有很多同学认为，图片已经满足了我们的日常需求为什么还要字体图标呢。大概有以下几点(敲黑板👨‍💻)

- 加载速度快，体积小🎈。
- 字体图标的颜色和大小都是可以设置的，如果使用图片的话就只能换一张图🎭。
- 字体图标有独立的分辨率，无论是网页端💻和手机端📱都有很好的展示。

## 字体图标工具选型
 - [阿里巴巴矢量图标库](https://www.iconfont.cn/)
 - [icomoon](https://icomoon.io/)
 - [Font Awesome](http://www.fontawesome.com.cn/)

由于我们公司使用的是`阿里巴巴矢量图标库`来生成的，我下面的分享都会以这个为例。其他工具也都是类似哒🎨

 不同框架引入的方式多多少少会有所不同🧐，我把常用到的几种方式都来哔哔一下,请君笑纳♥。
## 使用`create-react-app`创建的工程中引入`iconfont`
如果还有老铁不知道怎么使用`create-react-app`创建项目的[看这里](https://zh-hans.reactjs.org/docs/create-a-new-react-app.html)

首先大家要清楚一点，前端工程师主要来负责图标的展示，创造图标的这些小事`UI`设计师肯定手到擒来😏，我们交给他就可以啦，如果公司没有`UI`设计师，也不用怕。图标库提供了相当多的图标。相信你肯定能找到属于你的那一款。

- 注册，登录(不多说啦😀)
- 登录成功之后点击小云彩上传`svg`图标(一定是`svg`哦😙)

![](https://static01.imgkr.com/temp/4aa2063cb8554137b40cf94615dcf8c9.png)

- 选择第一个框框(支持同时上传多个)

![](https://static01.imgkr.com/temp/a68bf05f2d684b4383d206b0c878c8f6.png)


- 根据需求自行选择要不要去色。
![](https://static01.imgkr.com/temp/9592a57b7b3b4b259e64c5bf5005cefe.png)
- 鼠标悬浮到上传的图标点击购物车(支持批量加入购物车，不花钱的哦🤣)

![](https://static01.imgkr.com/temp/751668897a65433ca6d3e6337b99190c.png)


- 下载代码
![](https://static01.imgkr.com/temp/0bec4953f2704238bf7582576f82afda.png)
下载代码成功之后双击打开文件夹下面的`demo_index.html`

![](https://static01.imgkr.com/temp/74107d09fbcb4565a55091ff76286997.png)

有三种引用方式本文只讲后两种(第一种是真的不常用😑)
这三种区别在`demo.html`中都有明确的说明，我就不班门弄斧啦🎉。
### FontClass

打开刚才创建的`react`项目在`public`文件夹下新建一个文件夹起名`font`(随意起名)然后把下载的图标代码全部拷贝到`font`目录下`demo.html`和`demo.css`可以不要.

![](https://static01.imgkr.com/temp/09f3147089794df7a121646bb3c46d8d.png)

然后在`index.html`中引入`iconfont.css`
```
<link rel="stylesheet" href="./font/iconfont.css">
```
然后在全局任意页面使用标签绑定类名就可以了(个人建议使用i标签或者span标签)

```
# xxx是什么你去看demo.html一眼就会看到啦，默认是svg图标的文件名。
<i className="iconfont icon-xxx"></i> 
```
启动项目`npm start `
大功告成🎨(不成功来找我！)
### Symbol

在`index.html`中引入`iconfont.js`
```
 <script src="./font/iconfont.js"></script>
```
全局任意页面使用
```
<svg class="icon" aria-hidden="true" width="50" height="50">
  <use xlink-href="#icon-xxxx"></use>
</svg>
```
启动项目`npm start `你发现你失败了，`WTF`😲我这完全按照文档复制粘贴的啊，为什么会失败!。
不要忘了我们现在是在`jsx`里面写`html` 跟普通的`html`还是有些区别的  查阅[文档](https://reactjs.org/docs/dom-elements.html#all-supported-html-attributes)之后我们改成这个样子。
```
 <svg class="icon" aria-hidden="true" width="50" height="50">
         <use xlinkHref="#icon-dapingzhanshi"></use>
</svg>
```

## 使用`create-react-app`创建的工程中使用ant.design自定义图标
`ant.design`提供了丰富图标但有的时候可能它提供的图标也不能满足我们日常的需求。我们可以使用以上两种阿里巴巴提供的方式进行引入，也可以使用`ant.design`提供的默认方法

ant.design不同版本的引入方式可能会有区别，具体的引入方式还要以[官网](https://ant.design/components/icon-cn/)为主

![](https://static01.imgkr.com/temp/59c6bf0656b54bae951b4c55bf444ebc.png)

> 注: `scriptUrl`后面对应的地址就是我们在 `Symbol`方式引入的`js`文件，如果js文件放在了public目录下不需要使用require，因为public不会参与打包。
## 使用ant.desin.pro创建的项目引入IconFont

使用`ant.design.pro`搭建的项目在`src/defaultSetting.js`中有一个`iconfontUrl`字段，将之前下载好的字体文件放在`public/fonts`下面，把`js`文件引入即可。

![](https://static01.imgkr.com/temp/0878fb69250a41c08d1b7a731ec5592e.png)

使用方法：
- 如果是路由菜单的话直接在路由上将对应的icon名字写在icon属性后面就可以了。

![](https://static01.imgkr.com/temp/c778fdfa22d74826b11a88a3180bcab6.png)

 如果是某个页面展示图标 
 - `FontClass`方式 需要在`global.less`文件中引入`css`文件,使用的话使用`i`标签或者`span`标签引入就可以📣。

![](https://static01.imgkr.com/temp/ec045dc84253400c95e6b9e4708f0892.png)

```
<i className="iconfont icon-xuqiudengji"></i>
```

- `Symbol`方式 无需引入`css`文件因为我们在`defaultSetting`中已经配置了`js`文件。直接按照上文提到的`Symbol`使用方式就可以📣。

```
<svg className="icon" aria-hidden="true" width="50" height="50">
    <use xlinkHref="#icon-xuqiudengji"></use>
</svg>
```
> 当然 ant.design.pro 也集成了ant.design也可以使用ant.design提供的默认方法引入。

## 使用`vue-cli`搭建的`vue`项目

阿里巴巴提供的方式都可以使用，只是引入的位置有区别。

- FontClass 在入口文件`main.js`中引入字体的css文件

![](https://static01.imgkr.com/temp/6ff807746eb14bcc8051d8ee9c22e039.png)

在全局任意页面使用如下标签即可。

```
<i className="iconfont icon-xuqiudengji"></i>
```

- Symbol 在入口文件`main.js`中引入字体的js文件

![](https://static01.imgkr.com/temp/667af74f53a148af8f8355cf7d59b8f4.png)

在全局任意页面使用如下标签即可。

```
<svg class="icon" aria-hidden="true">
    <use xlink:href="#icon-aliens-ip"></use>
</svg>
```

## 如何自动更新svg字体图标

上面的这些方式，如果你习惯了之后你会发现一个问题，就是我们每次如果有新的图标加入的时候我们都要重复一次之前的动作 上传所有`svg`>下载图标代码>替换`font`文件夹。要说麻烦其实也不太麻烦，就是几分钟的事。我们肯定不想一直重复做相同的事情。

### 在线链接 

阿里巴巴还是强啊！他提供了在线链接😃，只要我们图标库的项目里面增加了图标他就会自动生成链接，这就相当于我们不需要去下载图标代码了，直接使用他在线的链接就可以了`FontClass`和`Symbol`都有。敲黑板📏！！！
>流程大概就是这样，我们需要在阿里巴巴图标库中创建一个项目，然后将自己想要的图标导入到自己的项目，他会自动生成在线链接，我们就不需要在下载图标代码到自己的项目了，直接把上面的本地路径改成他的在线链接就可以了。好活🤣
![](https://static01.imgkr.com/temp/414ab69dddb54e88b2ebc31e21ab07ef.png)
当然缺点也是很明显的，这种方式就相当于是阿里巴巴帮助我们维护`svg`图标，如果某一天链接不通了，网络不通了，领导还是会找你。只不过这是一种简单快捷的方法，我们还是自己维护`svg`图标才能做到心里有数。
 
### [svgtofont.js](https://github.com/jaywcjlove/svgtofont)

新建项目起名为`svgToFont`在文件夹中执行`npm init --yes`,在svgToFont文件夹下新建文件夹起名为`svg`将你要用到的`svg`图标全部拷贝到`svg`文件夹中，安装`svgtofont`
```
npm init --yes 
npm install svgtofont --save
```
安装完成之后新建`app.js`文件将下面的代码全部拷贝到app.js中
``` javascript
const svgtofont = require("svgtofont");
const path = require("path");

svgtofont({
  src: path.resolve(process.cwd(), "svg"), // svg 图标目录路径
  dist: path.resolve(process.cwd(), "fonts"), // 输出到指定目录中
  fontName: "iconfont", // 设置字体名称
  css: true, // 生成字体文件
  startNumber: 20000, // unicode起始编号
  svgicons2svgfont: {
    fontHeight: 1000,
    normalize: true
  },
  website: null // 没有演示html文件
}).then(() => {
  console.log('生成完成!');
});;
```
然后在项目根目录执行`node app.js`不出意外的话你会看到`fonts`目录，里面的内容基本上是和阿里巴巴图标库下载的代码一样。也是同样按照上面提供的那些方式，进行引入，使用就可以。但是现在变成了我们自己维护`svg`图标。
> 注意`symbol`方式引用的时候会有些不同，因为字体图标生成之后你会发现没有`js`文件，所以在使用的时候要把symbol.svg的路径加上。附上[xlinkHref](https://cloud.tencent.com/developer/section/1424047)对应路径的详解，我这个路径弄了好久😣。
> 
```
<svg>
  <use xlinkHref="/font/iconfont.symbol.svg#iconfont-aliens-ip"}></use>
</svg>
```

### [webpack-iconfont-plugin-nodejs](https://github.com/hzsrc/webpack-iconfont-plugin-nodejs)

这个`webpack`插件大概的原理就是监听`svg`文件的变化，当有修改或添加，删除svg文件的时候就会生成对应的字体图标代码🎍。
- 方式一

我们可以按照新建项目的形式来维护我们的`svg`图标(类似于`svgtofont.js`)🧵。

- 方式二

因为`webpack-iconfont-plugin-nodejs`是支持热加载的可以实时监听`svg`文件的变化，我们也可以在webpack插件中使用它，需要将使用的svg图标全部拷贝到项目中而不是新建一个项目来维护。🎃具体使用方法[看这里](https://segmentfault.com/a/1190000017480480)

## 总结
 总而言之，在日常的开发中，字体图标还是特别常见的，以上几种方式，应该可以满足基本的开发了🧐，如果有大佬还有更优雅的方式，欢迎在评论区狠狠的教育我，一起进步🤣。
 
## 参考文章
[svgtofont](https://segmentfault.com/a/1190000016462275)

[webpack-iconfont-plugin-nodejs](https://segmentfault.com/a/1190000017480480)

[菜单栏自定义ICON](https://zhuanlan.zhihu.com/p/57998143)

[symbol](https://developer.mozilla.org/zh-CN/docs/Web/SVG/Element/symbol)






