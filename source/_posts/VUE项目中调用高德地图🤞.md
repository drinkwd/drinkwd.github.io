---
title: VUEé¡¹ç›®ä¸­è°ƒç”¨é«˜å¾·åœ°å›¾ğŸ¤
tags: [Vue]
categories: æŠ€æœ¯
index_img: /img/blog_img/index14.jpg
banner_img: /img/blog_img/banner14.jpg
---

## å‰è¨€

ç›¸ä¿¡å¤§å®¶æˆ–å¤šæˆ–å°‘éƒ½æ¥è§¦è¿‡åœ¨å¤§å±çš„é¡¹ç›®ï¼Œåœ¨å¤§å±é¡¹ç›®ä¸­é™¤äº†ç”¨åˆ°äº†`echarts`ä¸­çš„è¡Œæ”¿åœ°å›¾ï¼Œè¡—é“åœ°å›¾ä¹Ÿæ˜¯å¾ˆå¸¸è§çš„ï¼Œä»Šå¤©ä¸»è¦æ¥è¯´ä¸€ä¸‹åœ¨`vue`ä¸­è°ƒç”¨é«˜å¾·åœ°å›¾é‡åˆ°çš„ä¸€äº›é—®é¢˜ğŸ¤ªã€‚

## ç”³è¯·é«˜å¾·key

æ— è®ºæˆ‘ä»¬ä½¿ç”¨ä»»ä½•æ–¹å¼è°ƒç”¨é«˜å¾·åœ°å›¾éƒ½éœ€è¦åœ¨[é«˜å¾·åœ°å›¾å¼€æ”¾å¹³å°](https://lbs.amap.com/?ref=https://console.amap.com)ä¸­ç”³è¯·`key`ğŸ˜

- æ³¨å†Œå¸å·

è®¿é—®é«˜å¾·åœ°å›¾å¼€å‘å¹³å°æ ¹æ®å®é™…æƒ…å†µå¡«å†™å°±å¯ä»¥ğŸœï¼ˆå®åè®¤è¯çš„æ—¶å€™é€‰æ‹©ä¸ªäººå°±å¯ä»¥ï¼Œå¦‚æœæ˜¯ä¼ä¸šçº§çš„é¡¹ç›®ï¼Œå¯èƒ½ä¼šæ¶‰åŠäººå‘˜å˜åŠ¨ï¼Œå»ºè®®ä½¿ç”¨å…¬å¸é‚®ç®±è¿›è¡Œæ³¨å†Œï¼‰åŒºåˆ«å¦‚ä¸‹ğŸ‘‡ã€‚

![](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/f4f251d8f6d04c47882a1fdf710ec56a~tplv-k3u1fbpfcp-zoom-1.image)

![](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/08aceac969b04ae59328f01790afa5aa~tplv-k3u1fbpfcp-zoom-1.image)


- åˆ›å»ºåº”ç”¨ 

æ–°å»ºåº”ç”¨æ—¶åç§°ï¼Œä¸ç±»å‹å¯ä»¥éšæ„å¡«å†™ï¼Œå°½é‡å¡«å†™çš„ä¸å¼€å‘çš„åº”ç”¨ä¸€ç›´ï¼Œæ–¹ä¾¿åæœŸç»´æŠ¤ğŸš˜

![](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/64d0ece0edcb46cbbbc0296f5dfe8ed3~tplv-k3u1fbpfcp-zoom-1.image)
åº”ç”¨åˆ›å»ºæˆåŠŸä¹‹åï¼Œç‚¹å‡»æ·»åŠ å°±ä¼šéœ€è¦æˆ‘ä»¬é€‰æ‹©éœ€è¦ä½¿ç”¨é«˜å¾·åœ°å›¾çš„å“ªäº›æœåŠ¡ï¼Œä¸åŒçš„æœåŠ¡å¹³å°ï¼Œå¯¹åº”å¡«å†™çš„å†…å®¹ä¹Ÿæœ‰æ‰€åŒºåˆ«ğŸªï¼Œä¾‹å¦‚`Android`éœ€è¦å¡«å†™`App`åŒ…åï¼Œ`Android`çš„`SHA1`ç ç­‰ç­‰ï¼Œå› ä¸ºæˆ‘è¿™æ¬¡çš„é¡¹ç›®æ˜¯ä¸ªå¤§å±é¡¹ç›®æ‰€ä»¥å°±é€‰æ‹©`Webç«¯ï¼ˆJSAPIï¼‰`ğŸ˜®

![](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/8103e4a7817a4fe0a9b860e914bae98b~tplv-k3u1fbpfcp-zoom-1.image)
ä¿¡æ¯å¡«å†™å®Œæ¯•ä¹‹åå°±ä¼šåœ¨å½“å‰åº”ç”¨ä¸‹ç”Ÿæˆå¯¹åº”çš„Keyå€¼å’Œ**å®‰å…¨å¯†é’¥**ï¼ˆå®‰å…¨å¯†é’¥åœ¨ä¹‹å‰çš„ç‰ˆæœ¬ä¸­æ˜¯æ²¡æœ‰çš„ï¼‰

![](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/a8870fbfa6014366bc27b6c32b8d2f2b~tplv-k3u1fbpfcp-zoom-1.image)


## æŠ€æœ¯é€‰å‹

#### [`vue-amap`](https://elemefe.github.io/vue-amap/#/)
`vue-amap`æ˜¯åŸºäº `Vue 2.x `ä¸é«˜å¾·çš„åœ°å›¾ç»„ä»¶ğŸ‘¨â€ğŸ¦°ï¼Œæä¾›ä¸€äº›åŸºç¡€å’Œé«˜çº§çš„åŠŸèƒ½ï¼Œä¾‹å¦‚ï¼šåœ°å›¾æ‰ç‚¹ï¼Œä¿¡æ¯çª—ä½“ï¼Œæœç´¢ç»„ä»¶ï¼Œç±»å‹æ’ä»¶ç­‰ç­‰ï¼Œä¸éœ€è¦æˆ‘ä»¬åœ¨é€ è½®å­äº†ï¼Œæ‰€ä»¥æˆ‘ä»¬å°±æ¥è¯•ä¸€è¯•ğŸ‘ã€‚

##### å‡†å¤‡å·¥ä½œ

> å½“æˆ‘ä»¬åœ¨ä½¿ç”¨ç»„ä»¶çš„æ—¶å€™éƒ½ä¼šå…ˆçœ‹ä¸€ä¸‹æ–‡æ¡£ï¼Œä½†æ˜¯å½“æˆ‘åœ¨çœ‹æ–‡æ¡£çš„æ—¶å€™å‘ç°ï¼Œæ–‡æ¡£ä¸­åªæœ‰å¯¹åº”çš„`api`è€Œæ²¡æœ‰ç¤ºä¾‹ï¼Œå¾ˆéš¾ä¸‹æ‰‹ï¼Œäºæ˜¯åœ¨[`issues`](https://github.com/ElemeFE/vue-amap/issues/646)ä¸­æ‰¾åˆ°äº†ç­”æ¡ˆã€‚

![](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/ecec3f94258544aebbfe5c4d1035d806~tplv-k3u1fbpfcp-zoom-1.image)

è§£å†³æ–¹æ¡ˆä¹Ÿå¾ˆç®€å•

- å°†é¡¹ç›®ä¸‹è½½åˆ°æœ¬åœ°

![](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/4936e46f3e2044d4b58ce15f06e43266~tplv-k3u1fbpfcp-zoom-1.image)

- ä¿®æ”¹`src/docs/index.html`é‡Œçš„`docsify`å¼•ç”¨
```html
å°†
<script src="//unpkg.com/docsify/lib/docsify.min.js"></script>
ä¿®æ”¹ä¸º
<script src="//unpkg.com/docsify@4.11.6/lib/docsify.min.js"></script>
```

![](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/4704daecc802444287432df7a78bbcf7~tplv-k3u1fbpfcp-zoom-1.image)

- æ‰§è¡Œ`npm install` `npm start`é»˜è®¤åœ¨`4201`ç«¯å£å°±ä¼šå¯åŠ¨é¡¹ç›®å°±å¯ä»¥çœ‹åˆ°é¡¹ç›®ç¤ºä¾‹äº†ã€‚

![](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/0b501477ca64441787d6b22fb890af3b~tplv-k3u1fbpfcp-zoom-1.image)

#####  é¡¹ç›®ä¸­åº”ç”¨

- `npm`å®‰è£…
```
npm install vue-amap --save
```
- `main.js`ä¸­æŒ‚è½½`vue-amap`

``` javascript
import VueAMap from 'vue-amap';
Vue.use(VueAMap);
VueAMap.initAMapApiLoader({
  //ç”³è¯·åœ°å€ https://lbs.amap.com/ é€‰æ‹©webç«¯jsAPI
  key: 'è‡ªå·±ç”³è¯·çš„é«˜å¾·åœ°å›¾key', 
  // æ’ä»¶é›†åˆï¼Œç”¨åˆ°ä»€ä¹ˆæ’ä»¶å°±ä½¿ç”¨ä»€ä¹ˆæ’ä»¶
  plugin: ['AMap.Autocomplete', 'AMap.PlaceSearch', 'AMap.Scale', 'AMap.OverView', 'AMap.ToolBar', 'AMap.MapType', 'AMap.PolyEditor', 'AMap.CircleEditor'],
  v: '1.4.4', // é«˜å¾·sdkç‰ˆæœ¬ï¼Œæœ€æ–°çš„sdkå·²ç»å‡ºåˆ°äº†2.0
  //å®˜ç½‘è§£é‡Šï¼šJSAPI 2.0 æä¾›çš„å¼€å‘æ¥å£ä¸ 1.4 ç‰ˆæœ¬è¾¾åˆ° 99%çš„å…¼å®¹åº¦ï¼Œä½†æ˜¯ä¸ºäº†ä¿è¯æ’ä»¶çš„ç¨³å®šæ€§æˆ‘ä»¬è¿˜æ˜¯é€‰æ‹©1.4.4ã€‚
})
```
- ç»„ä»¶ç”¨æ³•
```html
<template>
      <el-amap ref="map" vid="amapDemo" :center="center" :zoom="zoom" :events="events" class="amap-demo">
      </el-amap>
  </template>
  <script>
    // å»ºè®®å°†zoom,centerç­‰å¯é…ç½®çš„é¡¹å‡å†™åœ¨é…ç½®æ–‡ä»¶ä¸­ï¼Œæ–¹ä¾¿æ‰“åŒ…ä¹‹åè¿›è¡Œä¿®æ”¹ã€‚
    module.exports = {
      data: function() {
        return {
          zoom: 12,
          center: [121.59996, 31.197646],
          events: {
            'click': (e) => {
              alert('map clicked');
            }
          },
        };
      },
    };
</script>
```


ä»¥ä¸Šå°±æ˜¯åœ¨`vue`é¡¹ç›®ä¸­ä½¿ç”¨`vue-amap`è°ƒç”¨é«˜å¾·åœ°å›¾`api`çš„åŸºæœ¬ä½¿ç”¨ğŸ˜€ï¼Œå…·ä½“å¯¹åœ°å›¾çš„æ“ä½œå¯ä»¥æ ¹æ®æ–‡æ¡£çš„è§„èŒƒæ¥å°±å¯ä»¥äº†ï¼Œåœ¨ä½¿ç”¨çš„è¿‡ç¨‹ä¸­å¯èƒ½ä¼šé‡åˆ°å‡ ä¸ªé—®é¢˜ğŸ˜£ã€‚

### åˆ·æ–°é¡µé¢ï¼Œåœ°å›¾åŠ è½½å¶å°”å¤±è´¥

- åœ¨main.jsä¸­åŠ å…¥ä»¥ä¸‹å†…å®¹ã€‚
```javascript
// è§£å†³åœ°å›¾åˆ·æ–°æ˜¾ç¤ºä¸å‡ºæ¥
const amapKeys = Object.keys(localStorage).filter(key => key.match(/^_AMap_/))
amapKeys.forEach(key => {
  // console.log(key)
  localStorage.removeItem(key)
})
```

### åœ¨ç»‘å®šæ’ä»¶çš„æ—¶å€™ï¼Œæ§åˆ¶å°æŠ¥é”™ `a[d].split is not a function`

- å«æœ‰åœ°å›¾ç»„ä»¶çš„è·¯ç”±ä¸ä½¿ç”¨æ‡’åŠ è½½çš„æ–¹å¼ï¼ˆ*ä¸´æ—¶æ–¹æ¡ˆ*ï¼‰

![](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/8562a6608f514f6db0a4a9409521c31b~tplv-k3u1fbpfcp-zoom-1.image)

> æ³¨ï¼š `vue-amap` æ˜¯ä¸æ”¯æŒ`vue3.x`ï¼ŒğŸ˜¥å¹¶ä¸”ä¸èƒ½ç»‘å®šé«˜å¾·åœ°å›¾æ–°ç‰ˆ`api`å¯¹åº”çš„å®‰å…¨å¯†é’¥`jscode`,å¯èƒ½ä¼šå¯¼è‡´éƒ¨åˆ†æœåŠ¡æ— æ³•ä½¿ç”¨ã€‚ å¯¹åº”çš„`vue3`ç‰ˆæœ¬çš„æ’ä»¶[çœ‹è¿™é‡Œ](https://vue-amap.guyixi.cn/)ğŸ§µã€‚

## åŸç”Ÿè°ƒç”¨é«˜å¾·API




- å®‰è£…å®˜æ–¹æä¾›çš„loader 
```
npm install @amap/amap-jsapi-loader --save
```
- main.jsä¸­ç»‘å®šå®‰å…¨å¯†é’¥jscodeï¼ˆä¸ç»‘å®šéƒ¨åˆ†åŠŸèƒ½æ— æ³•ä½¿ç”¨ï¼‰
```JavaScript
// è¯¥å†™æ³•åªæ¨èåœ¨å¼€å‘é˜¶æ®µï¼Œå¦‚æœåœ¨ç”Ÿäº§é˜¶æ®µå»ºè®®é‡‡ç”¨åå‘ä»£ç†
// å®˜ç½‘è¯´æ˜https://lbs.amap.com/api/javascript-api/guide/abc/prepare
window._AMapSecurityConfig = {
  securityJsCode: 'jscode' // è¾“å…¥ä½ çš„jscode
}
```
- å°è£…ç»„ä»¶
``` html
<template>
    <div class="home_div">
        <div id="container"></div>
    </div>
</template>
<script>
import AMapLoader from '@amap/amap-jsapi-loader';

export default {
    name: "Mapview",
    data() {
        return {
            map: null,
        }
    },
    created() {

    },
    mounted() {
        this.initAMap();
    },
    methods: {
        initAMap() {
            AMapLoader.load({
                key: 'xxx',  //è®¾ç½®æ‚¨çš„key
                version: "2.0", // é«˜å¾·åœ°å›¾ç‰ˆæœ¬
                plugins: ['AMap.ToolBar', 'AMap.Driving'], // æ’ä»¶
                AMapUI: { // é«˜å¾·åœ°å›¾UIç»„ä»¶åº“ï¼Œå¯ä¸å†™ï¼Œå†…éƒ¨æä¾›äº†è¦†ç›–ç‰©æ ‡æ³¨ç‚¹ï¼Œä»¥åŠéƒ¨åˆ†æ¨¡å—çš„å°è£…
                    version: "1.1",
                    plugins: [],
                },
                Loca: { // Locaç‰ˆæœ¬(é«˜æ€§èƒ½åœ°å›¾æ•°æ®å¯è§†åŒ–åº“) å¯ä¸å†™
                    version: "2.0"
                },
            }).then((AMap) => {
                // containeræ¸²æŸ“çš„id
                this.map = new AMap.Map("container", {
                    zoom: 5, // å½“å‰ç¼©æ”¾çº§åˆ«
                    zooms: [2, 22], // ç¼©æ”¾çº§åˆ«èŒƒå›´
                    center: [105.602725, 37.076636], // ä¸­å¿ƒç‚¹
                });
            }).catch(e => {
                console.log(e);
            })
        },
    }
}
</script>
<style  scoped>
.home_div {
    padding: 0px;
    margin: 0px;
    width: 100%;
    height: 100%;
    position: relative;
}
#container {
    padding: 0px;
    margin: 0px;
    width: 100%;
    height: 100%;
    position: absolute;
}
</style>
```



#### æ··åˆä½¿ç”¨ï¼ˆvue-amapä¸åŸç”ŸAPIæ··åˆä½¿ç”¨ï¼‰
- åªæƒ³é€šè¿‡ `vue-amap `å¼•å…¥é«˜å¾·åœ°å›¾ï¼Œè€Œéƒ¨åˆ†å®ä¾‹åŒ–çš„æ“ä½œç›´æ¥åŸºäºé«˜å¾·åœ°å›¾çš„ `sdk `å®Œæˆ
> å®ä¾‹åŒ–æ“ä½œä¸æ˜¯åŠ è½½åœ°å›¾ï¼Œç®€å•æ¥è¯´å°±æ˜¯ç”¨ä¸€äº›å±æ€§å»å®ä¾‹åŒ–åœ°å›¾çš„è¿™ä¸ªç±» `new xxx()` ä»£è¡¨çš„å°±æ˜¯å®ä¾‹åŒ–`xxx`ğŸ›¸ã€‚è¿™æ ·å°±ä¸éœ€è¦åœ¨ä½¿ç”¨`el-amap`ä¸­çš„`center`å±æ€§å’Œ`zoom`å±æ€§äº†ğŸ¨ï¼Œå› ä¸ºå·²ç»é€šè¿‡åŸç”Ÿçš„æ–¹å¼è¿›è¡Œå®ä¾‹åŒ–äº†ğŸ‘œã€‚
```
import { lazyAMapApiLoaderInstance } from 'vue-amap';
lazyAMapApiLoaderInstance.load().then(() => {
  // your code ...
  this.map = new AMap.Map('amapContainer', {
    center: new AMap.LngLat(121.59996, 31.197646)
  });
});
```

- åœ¨`vue-amap`ä¸­å¼•å…¥é«˜å¾·åŸç”Ÿ`SDK`åªéœ€åœ¨`el-amap`ä¸Šç»‘å®š`amap-manager`å°±å¯ä»¥æ‹¿åˆ°é«˜å¾·åŸç”Ÿ`AMap.Map`å®ä¾‹[æ–‡æ¡£åœ°å€](https://elemefe.github.io/vue-amap/#/zh-cn/introduction/compatible)
```html
<template>
  <div class="amap-page-container">
    <el-amap vid="amapDemo" :center="center" :amap-manager="amapManager" :zoom="zoom"
      class="amap-demo">
    </el-amap>

    <div class="toolbar">
      <button @click="add()">add marker</button>
    </div>
  </div>
</template>

  <style>
.amap-demo {
  height: 300px !important;
}
</style>

  <script>
// NPM æ–¹å¼
import { AMapManager } from 'vue-amap';
let amapManager = new AMapManager();
export default {
  data: function () {
    return {
      zoom: 12,
      center: [121.59996, 31.197646],
      amapManager,
    };
  },

  methods: {
    add() {
      let o = amapManager.getMap();
      let marker = new AMap.Marker({
        position: [121.59996, 31.177646]
      });
      marker.setMap(o);
    }
  }
};
</script>
```


## æ€»ç»“

ç½‘ä¸Šé’ˆå¯¹é«˜å¾·åœ°å›¾çš„è°ƒç”¨æ–¹æ¡ˆä¹Ÿæœ‰å¾ˆå¤šï¼Œæˆ‘ä¹Ÿæ˜¯åˆšåˆšæ¥è§¦ï¼Œæ–‡ä¸­çš„è§‚ç‚¹éƒ½æ˜¯è‡ªèº«çš„çœ‹æ³•ï¼Œæœ€åè¯´ä¸€ä¸‹è‡ªèº«å¯¹é€‰å‹çš„åˆ¤æ–­ğŸ‘ã€‚
 
- å¦‚æœæ˜¯å¤§å±ç±»çš„é¡¹ç›®ï¼Œæ²¡æœ‰è¿‡å¤šçš„äº¤äº’åªæ˜¯ç®€å•æ‰ç‚¹ï¼Œå±•ç¤ºå»ºè®®ä½¿ç”¨`vue-amap`ğŸ¤™ğŸ¤™ğŸ¤™ã€‚
- å¦‚æœæ˜¯å·²åœ°å›¾ä¸ºä¸­å¿ƒçš„é¡¹ç›®ï¼ŒåŒ…æ‹¬äººå‘˜è·¯çº¿ï¼Œè½¨è¿¹ç­‰ç­‰æ¯”è¾ƒå¤æ‚çš„äº¤äº’å»ºè®®ä½¿ç”¨åŸç”ŸğŸ¤™ğŸ¤™ğŸ¤™ã€‚

![](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/c721b629f48f4fdd90071c8751616844~tplv-k3u1fbpfcp-zoom-1.image)

## å‚è€ƒé“¾æ¥

- [é«˜å¾·åœ°å›¾API](https://lbs.amap.com/api/javascript-api/guide/abc/prepare)

- [vue-amap](https://elemefe.github.io/vue-amap/#/)
