<!DOCTYPE html><html lang="zh-CN" data-default-color-scheme="dark"><head><meta charset="UTF-8"><link rel="apple-touch-icon" sizes="76x76" href="/img/favicon.png"><link rel="icon" href="/img/favicon.png"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=5,shrink-to-fit=no"><meta http-equiv="x-ua-compatible" content="ie=edge"><meta name="theme-color" content="#2f4154"><meta name="author" content="drinkwd"><meta name="keywords" content="drinkwd"><meta name="description" content="å‰è¨€ ç”±äºç›®å‰åšçš„é¡¹ç›®éƒ½æ˜¯åŸºäºtabå¯¼èˆªçš„é¡¹ç›®ï¼Œç›®çš„å°±æ˜¯è¦åœ¨é¡µé¢è·³è½¬æ—¶å®ç°è®°ä½ä¸Šä¸€ä¸ªé¡µé¢çš„æœç´¢é¡¹æˆ–è€…è¡¨å•å€¼ï¼Œå‡å°‘è¯·æ±‚ï¼Œå¢åŠ æ•ˆç‡ï¼Œç¬¬ä¸€ååº”å°±æ˜¯keep-alive,ç´§æ¥ç€æˆ‘çš„å™©æ¢¦å°±æ¥äº†ğŸ˜«ã€‚ps:çœ‹å°é¢å›¾è¿›æ¥çš„è®°å¾—æ”¶è—å“¦ğŸ­  keep-aliveæ¦‚å¿µå±æ€§ï¼š include åªæœ‰åç§°åŒ¹é…çš„ç»„ä»¶ä¼šè¢«ç¼“å­˜ğŸ™„(åç§°æŒ‡çš„æ˜¯ç»„ä»¶ä¸­å®šä¹‰çš„name)ã€‚ excludeã€‚ä»»ä½•åç§°åŒ¹é…çš„ç»„ä»¶éƒ½ä¸ä¼šè¢«ç¼“å­˜ğŸ§µã€‚ ma"><meta property="og:type" content="article"><meta property="og:title" content="keep-aliveä¸router-viewçš„ç›¸çˆ±ç›¸æ€"><meta property="og:url" content="https://drinkwd.github.io/2022/05/17/keep-alive%E4%B8%8Erouter-view%E7%9A%84%E7%9B%B8%E7%88%B1%E7%9B%B8%E6%9D%80/index.html"><meta property="og:site_name" content="drinkwdçš„ä¸ªäººåšå®¢"><meta property="og:description" content="å‰è¨€ ç”±äºç›®å‰åšçš„é¡¹ç›®éƒ½æ˜¯åŸºäºtabå¯¼èˆªçš„é¡¹ç›®ï¼Œç›®çš„å°±æ˜¯è¦åœ¨é¡µé¢è·³è½¬æ—¶å®ç°è®°ä½ä¸Šä¸€ä¸ªé¡µé¢çš„æœç´¢é¡¹æˆ–è€…è¡¨å•å€¼ï¼Œå‡å°‘è¯·æ±‚ï¼Œå¢åŠ æ•ˆç‡ï¼Œç¬¬ä¸€ååº”å°±æ˜¯keep-alive,ç´§æ¥ç€æˆ‘çš„å™©æ¢¦å°±æ¥äº†ğŸ˜«ã€‚ps:çœ‹å°é¢å›¾è¿›æ¥çš„è®°å¾—æ”¶è—å“¦ğŸ­  keep-aliveæ¦‚å¿µå±æ€§ï¼š include åªæœ‰åç§°åŒ¹é…çš„ç»„ä»¶ä¼šè¢«ç¼“å­˜ğŸ™„(åç§°æŒ‡çš„æ˜¯ç»„ä»¶ä¸­å®šä¹‰çš„name)ã€‚ excludeã€‚ä»»ä½•åç§°åŒ¹é…çš„ç»„ä»¶éƒ½ä¸ä¼šè¢«ç¼“å­˜ğŸ§µã€‚ ma"><meta property="og:locale" content="zh_CN"><meta property="og:image" content="https://drinkwd.github.io/img/blog_img/index9.jpg"><meta property="article:published_time" content="2022-05-17T00:47:32.335Z"><meta property="article:modified_time" content="2022-05-17T00:47:32.335Z"><meta property="article:author" content="drinkwd"><meta property="article:tag" content="Vue"><meta property="article:tag" content="uni-app"><meta name="twitter:card" content="summary_large_image"><meta name="twitter:image" content="https://drinkwd.github.io/img/blog_img/index9.jpg"><title>keep-aliveä¸router-viewçš„ç›¸çˆ±ç›¸æ€ - drinkwdçš„ä¸ªäººåšå®¢</title><link rel="stylesheet" href="https://cdn.staticfile.org/bootstrap/4.5.3/css/bootstrap.min.css"><link rel="stylesheet" href="https://cdn.staticfile.org/github-markdown-css/4.0.0/github-markdown.min.css"><link rel="stylesheet" href="https://cdn.staticfile.org/hint.css/2.7.0/hint.min.css"><link rel="stylesheet" href="https://lf3-cdn-tos.bytecdntp.com/cdn/expire-1-M/highlight.js/10.4.0/styles/vs2015.min.css"><link rel="stylesheet" href="https://cdn.staticfile.org/fancybox/3.5.7/jquery.fancybox.min.css"><link rel="stylesheet" href="//at.alicdn.com/t/font_1749284_ba1fz6golrf.css"><link rel="stylesheet" href="//at.alicdn.com/t/font_1736178_kmeydafke9r.css"><link rel="stylesheet" href="/css/main.css"><link rel="stylesheet" href="https://cdn.bootcdn.net/ajax/libs/font-awesome/6.0.0/css/all.min.css"><script id="fluid-configs">var Fluid=window.Fluid||{},CONFIG={hostname:"drinkwd.github.io",root:"/",version:"1.8.14",typing:{enable:!0,typeSpeed:70,cursorChar:"",loop:!1},anchorjs:{enable:!0,element:"h1,h2,h3,h4,h5,h6",placement:"right",visible:"hover",icon:""},progressbar:{enable:!0,height_px:3,color:"#29d",options:{showSpinner:!1,trickleSpeed:100}},copy_btn:!0,image_zoom:{enable:!0,img_url_replace:["",""]},toc:{enable:!0,headingSelector:"h1,h2,h3,h4,h5,h6",collapseDepth:0},lazyload:{enable:!0,loading_img:"/img/loading.gif",onlypost:!1,offset_factor:2},web_analytics:{enable:!1,baidu:null,google:null,gtag:null,tencent:{sid:null,cid:null},woyaola:null,cnzz:null,leancloud:{app_id:null,app_key:null,server_url:null,path:"window.location.pathname",ignore_local:!1}},search_path:"/local-search.xml"}</script><script src="/js/utils.js"></script><script src="/js/color-schema.js"></script><meta name="generator" content="Hexo 5.4.2"></head><body><header style="height:70vh"><nav id="navbar" class="navbar fixed-top navbar-expand-lg navbar-dark scrolling-navbar"><div class="container"><a class="navbar-brand" href="/"><strong>drinkwdçš„åšå®¢</strong> </a><button id="navbar-toggler-btn" class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation"><div class="animated-icon"><span></span><span></span><span></span></div></button><div class="collapse navbar-collapse" id="navbarSupportedContent"><ul class="navbar-nav ml-auto text-center"><li class="nav-item"><a class="nav-link" href="/"><i class="iconfont icon-home-fill"></i> é¦–é¡µ</a></li><li class="nav-item"><a class="nav-link" href="/archives/"><i class="iconfont icon-archive-fill"></i> å½’æ¡£</a></li><li class="nav-item"><a class="nav-link" href="/categories/"><i class="iconfont icon-category-fill"></i> åˆ†ç±»</a></li><li class="nav-item"><a class="nav-link" href="/tags/"><i class="iconfont icon-tags-fill"></i> æ ‡ç­¾</a></li><li class="nav-item"><a class="nav-link" href="/about/"><i class="iconfont icon-user-fill"></i> å…³äº</a></li><li class="nav-item"><a class="nav-link" href="/links/"><i class="iconfont icon-link-fill"></i> å‹é“¾</a></li><li class="nav-item" id="search-btn"><a class="nav-link" target="_self" href="javascript:;" data-toggle="modal" data-target="#modalSearch" aria-label="Search">&nbsp;<i class="iconfont icon-search"></i>&nbsp;</a></li><li class="nav-item" id="color-toggle-btn"><a class="nav-link" target="_self" href="javascript:;" aria-label="Color Toggle">&nbsp;<i class="iconfont icon-dark" id="color-toggle-icon"></i>&nbsp;</a></li></ul></div></div></nav><div class="banner" id="banner" parallax="true" style="background:url(/img/blog_img/banner9.jpg) no-repeat center center;background-size:cover"><div class="full-bg-img"><div class="mask flex-center" style="background-color:rgba(0,0,0,.3)"><div class="page-header text-center fade-in-up"><span class="h2" id="subtitle" title="keep-aliveä¸router-viewçš„ç›¸çˆ±ç›¸æ€"></span><div class="mt-3"><span class="post-meta mr-2"><i class="iconfont icon-author" aria-hidden="true"></i> drinkwd </span><span class="post-meta"><i class="iconfont icon-date-fill" aria-hidden="true"></i> <time datetime="2022-05-17 08:47" pubdate>2022å¹´5æœˆ17æ—¥ æ—©ä¸Š</time></span></div><div class="mt-1"><span class="post-meta mr-2"><i class="iconfont icon-chart"></i> 3.7k å­— </span><span class="post-meta mr-2"><i class="iconfont icon-clock-fill"></i> 31 åˆ†é’Ÿ </span><span id="busuanzi_container_page_pv" style="display:none"><i class="iconfont icon-eye" aria-hidden="true"></i> <span id="busuanzi_value_page_pv"></span> æ¬¡</span></div></div></div></div></div></header><main><div class="container-fluid nopadding-x"><div class="row nomargin-x"><div class="d-none d-lg-block col-lg-2"></div><div class="col-lg-8 nopadding-x-md"><div class="container nopadding-x-md" id="board-ctn"><div class="py-5" id="board"><article class="post-content mx-auto"><h1 style="display:none">keep-aliveä¸router-viewçš„ç›¸çˆ±ç›¸æ€</h1><div class="markdown-body"><h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><blockquote><p>ç”±äºç›®å‰åšçš„é¡¹ç›®éƒ½æ˜¯åŸºäº<code>tab</code>å¯¼èˆªçš„é¡¹ç›®ï¼Œç›®çš„å°±æ˜¯è¦åœ¨é¡µé¢è·³è½¬æ—¶å®ç°è®°ä½ä¸Šä¸€ä¸ªé¡µé¢çš„æœç´¢é¡¹æˆ–è€…è¡¨å•å€¼ï¼Œå‡å°‘è¯·æ±‚ï¼Œå¢åŠ æ•ˆç‡ï¼Œç¬¬ä¸€ååº”å°±æ˜¯<code>keep-alive</code>,ç´§æ¥ç€æˆ‘çš„å™©æ¢¦å°±æ¥äº†ğŸ˜«ã€‚<code>ps</code>:çœ‹å°é¢å›¾è¿›æ¥çš„è®°å¾—æ”¶è—å“¦ğŸ­</p></blockquote><h2 id="keep-aliveæ¦‚å¿µ"><a href="#keep-aliveæ¦‚å¿µ" class="headerlink" title="keep-aliveæ¦‚å¿µ"></a>keep-aliveæ¦‚å¿µ</h2><h6 id="å±æ€§ï¼š"><a href="#å±æ€§ï¼š" class="headerlink" title="å±æ€§ï¼š"></a>å±æ€§ï¼š</h6><ul><li><code>include</code> åªæœ‰<strong>åç§°</strong>åŒ¹é…çš„ç»„ä»¶ä¼šè¢«ç¼“å­˜ğŸ™„(åç§°æŒ‡çš„æ˜¯ç»„ä»¶ä¸­å®šä¹‰çš„name)ã€‚</li><li><code>exclude</code>ã€‚ä»»ä½•åç§°åŒ¹é…çš„ç»„ä»¶éƒ½ä¸ä¼šè¢«ç¼“å­˜ğŸ§µã€‚</li><li><code>max</code>ã€‚æœ€å¤šå¯ä»¥ç¼“å­˜å¤šå°‘ç»„ä»¶å®ä¾‹ğŸ¥™ã€‚</li></ul><h6 id="ç”¨æ³•ï¼š"><a href="#ç”¨æ³•ï¼š" class="headerlink" title="ç”¨æ³•ï¼š"></a>ç”¨æ³•ï¼š</h6><p><code>&lt;keep-alive&gt;</code> åŒ…è£¹åŠ¨æ€ç»„ä»¶æ—¶ï¼Œä¼šç¼“å­˜ä¸æ´»åŠ¨çš„ç»„ä»¶å®ä¾‹ï¼Œè€Œä¸æ˜¯é”€æ¯å®ƒä»¬ã€‚å’Œ <code>&lt;transition&gt;</code> ç›¸ä¼¼ï¼Œ<code>&lt;keep-alive&gt;</code> æ˜¯ä¸€ä¸ªæŠ½è±¡ç»„ä»¶ğŸ¤ï¼šå®ƒè‡ªèº«ä¸ä¼šæ¸²æŸ“ä¸€ä¸ª <code>DOM</code> å…ƒç´ ï¼Œä¹Ÿä¸ä¼šå‡ºç°åœ¨ç»„ä»¶çš„çˆ¶ç»„ä»¶é“¾ä¸­ğŸ¥§ã€‚</p><p>å½“ç»„ä»¶åœ¨ <code>&lt;keep-alive&gt;</code> å†…è¢«åˆ‡æ¢ï¼Œå®ƒçš„ <code>activated</code> å’Œ <code>deactivated</code> è¿™ä¸¤ä¸ªç”Ÿå‘½å‘¨æœŸé’©å­å‡½æ•°å°†ä¼šè¢«å¯¹åº”æ‰§è¡ŒğŸšƒï¼Œå› ä¸ºæˆ‘ä»¬å¯èƒ½ä¼šéœ€è¦å°†æ•´ä¸ªè·¯ç”±é¡µé¢ç¼“å­˜ä¸‹æ¥æ‰€ä»¥å°±è¦å°†<code>&lt;router-view&gt;</code>è¿›è¡Œç¼“å­˜ğŸ›´ã€‚</p><h6 id="æ‰§è¡Œé¡ºåºï¼š"><a href="#æ‰§è¡Œé¡ºåºï¼š" class="headerlink" title="æ‰§è¡Œé¡ºåºï¼š"></a>æ‰§è¡Œé¡ºåºï¼š</h6><ul><li>é¡µé¢ç¬¬ä¸€æ¬¡è¿›å…¥ï¼Œé’©å­çš„è§¦å‘é¡ºåº<code>created-&gt; mounted-&gt; activated</code>ï¼Œé€€å‡ºæ—¶è§¦å‘<code>deactivated</code>ã€‚å½“å†æ¬¡è¿›å…¥ï¼ˆå‰è¿›æˆ–è€…åé€€ï¼‰æ—¶ï¼Œåªè§¦å‘<code>activated</code>ğŸ¦¼ã€‚</li></ul><h2 id="router-viewæ¦‚å¿µ"><a href="#router-viewæ¦‚å¿µ" class="headerlink" title="router-viewæ¦‚å¿µ"></a>router-viewæ¦‚å¿µ</h2><blockquote><ul><li><code>&lt;router-view&gt;</code>ç»„ä»¶æ˜¯ä¸€ä¸ªåŠŸèƒ½ç»„ä»¶ï¼Œå®ƒä¸ºç»™å®šè·¯å¾„å‘ˆç°åŒ¹é…çš„ç»„ä»¶ğŸ¨ã€‚æ¸²æŸ“çš„ç»„ä»¶<code>&lt;router-view&gt;</code>ä¹Ÿå¯ä»¥åŒ…å«è‡ªå·±çš„<code>&lt;router-view&gt;</code>ï¼Œè¿™å°†ä¸ºåµŒå¥—è·¯å¾„æ¸²æŸ“ç»„ä»¶ğŸ¤´ã€‚</li></ul></blockquote><p><code>router-view</code> <strong>key</strong>å±æ€§ï¼ˆæ¯ä¸ªç»„ä»¶éƒ½æœ‰ä¸€ä¸ª<code>key</code>å±æ€§ï¼Œ<code>vue</code>ä¼šå¤ç”¨ç›¸åŒç»„ä»¶å¦‚æœéœ€è¦é‡æ–°æ¸²æŸ“å¯ä»¥ä½¿ç”¨ä¸åŒçš„<code>key</code>è¿›è¡Œï¼‰ğŸ›’</p><blockquote><ol><li><strong>ä¸è®¾ç½® <code>router-view</code> çš„ <code>key</code> å±æ€§</strong><br>ç”±äº Vue ä¼šå¤ç”¨ç›¸åŒç»„ä»¶, å³Â <code>/page/1Â =&gt;Â /page/2</code>Â æˆ–è€…Â <code>/page?id=1Â =&gt;Â /page?id=2</code>Â è¿™ç±»é“¾æ¥è·³è½¬æ—¶, ğŸ†å°†ä¸åœ¨æ‰§è¡Œ<code>created</code>, <code>mounted</code>ä¹‹ç±»çš„é’©å­, ğŸ±è¿™æ—¶å€™ä½ éœ€è¦åœ¨è·¯ç”±ç»„ä»¶ä¸­, æ·»åŠ <code>beforeRouteUpdate</code>é’©å­æ¥æ‰§è¡Œç›¸å…³æ–¹æ³•æ‹‰å»æ•°æ®ğŸ¥¯ã€‚</li></ol></blockquote><blockquote><ol start="2"><li><strong>è®¾ç½® <code>router-view</code> çš„ <code>key</code> å±æ€§å€¼ä¸º <code>$route.path</code></strong><br>ä»<code>/page/1Â =&gt;Â /page/2</code>, ç”±äºè¿™ä¸¤ä¸ªè·¯ç”±çš„<code>$route.path</code>å¹¶ä¸ä¸€æ ·, ğŸµæ‰€ä»¥ç»„ä»¶è¢«å¼ºåˆ¶ä¸å¤ç”¨, ç›¸å…³é’©å­ä»<code>/page?id=1Â =&gt;Â /page?id=2</code>,ğŸ¦ ç”±äºè¿™ä¸¤ä¸ªè·¯ç”±çš„<code>$route.path</code>ä¸€æ ·, æ‰€ä»¥å’Œæ²¡è®¾ç½® <code>key</code> å±æ€§ä¸€æ ·, ä¼šå¤ç”¨ç»„ä»¶ğŸ¥¡ã€‚</li></ol></blockquote><blockquote><ol start="3"><li><strong>è®¾ç½® <code>router-view</code> çš„ <code>key</code> å±æ€§å€¼ä¸º <code>$route.fullPath</code></strong><br>ä»<code>/page/1Â =&gt;Â /page/2</code>, ç”±äºè¿™ä¸¤ä¸ªè·¯ç”±çš„<code>$route.fullPath</code>å¹¶ä¸ä¸€æ ·, æ‰€ä»¥ç»„ä»¶è¢«å¼ºåˆ¶ä¸å¤ç”¨ğŸ¥™,<br>ä»<code>/page?id=1Â =&gt;Â /page?id=2</code>, ç”±äºè¿™ä¸¤ä¸ªè·¯ç”±çš„<code>$route.fullPath</code>å¹¶ä¸ä¸€æ ·, æ‰€ä»¥ç»„ä»¶è¢«å¼ºåˆ¶ä¸å¤ç”¨ğŸ¥ªã€‚</li></ol></blockquote><h2 id="å†™æ³•"><a href="#å†™æ³•" class="headerlink" title="å†™æ³•"></a>å†™æ³•</h2><h3 id="vue2-0çš„å†™æ³•"><a href="#vue2-0çš„å†™æ³•" class="headerlink" title="vue2.0çš„å†™æ³•"></a>vue2.0çš„å†™æ³•</h3><figure class="highlight elixir"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs elixir"><span class="hljs-comment"># åŒ…è£¹ç»„ä»¶</span><br><span class="hljs-comment"># currentTabComponent ä»£è¡¨ç»„ä»¶å</span><br><span class="hljs-comment"># ä¾‹å¦‚ä¸€ä¸ªé¡¹ç›®å¼•ç”¨äº†å¤šä¸ªç»„ä»¶é€šè¿‡ç›¸åº”äº‹ä»¶ä¿®æ”¹currentTabComponentçš„å€¼è¾¾åˆ°åŠ¨æ€ç»„ä»¶ç¼“å­˜çš„åŠŸèƒ½</span><br>&lt;keep-alive&gt;<br>   &lt;component v-<span class="hljs-symbol">bind:</span>is=<span class="hljs-string">&quot;currentTabComponent&quot;</span>&gt;&lt;/component&gt;<br>&lt;/keep-alive&gt;<br><span class="hljs-comment"># åŒ…è£¹è·¯ç”±</span><br><span class="hljs-comment"># a,b ä»£è¡¨ç»„å»ºåç§°</span><br>&lt;keep-alive <span class="hljs-symbol">:include=</span>[a,b]&gt;<br>    &lt;router-view <span class="hljs-symbol">:key=<span class="hljs-string">&quot;$route.fullPath&quot;</span>&gt;&lt;/router-view&gt;</span><br>&lt;/keep-alive&gt;<br></code></pre></div></td></tr></table></figure><h3 id="vue3-0çš„å†™æ³•"><a href="#vue3-0çš„å†™æ³•" class="headerlink" title="vue3.0çš„å†™æ³•"></a>vue3.0çš„å†™æ³•</h3><figure class="highlight dust"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs dust"><span class="language-xml"> åŒ…è£¹ç»„ä»¶</span><br><span class="language-xml"># currentTabComponent ä»£è¡¨ç»„ä»¶å</span><br><span class="language-xml"># ä¾‹å¦‚ä¸€ä¸ªé¡¹ç›®å¼•ç”¨äº†å¤šä¸ªç»„ä»¶é€šè¿‡ç›¸åº”äº‹ä»¶ä¿®æ”¹currentTabComponentçš„å€¼è¾¾åˆ°åŠ¨æ€ç»„ä»¶ç¼“å­˜çš„åŠŸèƒ½</span><br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">keep-alive</span>&gt;</span></span><br><span class="language-xml">   <span class="hljs-tag">&lt;<span class="hljs-name">component</span> <span class="hljs-attr">v-bind:is</span>=<span class="hljs-string">&quot;currentTabComponent&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">component</span>&gt;</span></span><br><span class="language-xml"><span class="hljs-tag">&lt;/<span class="hljs-name">keep-alive</span>&gt;</span></span><br><span class="language-xml"></span><br><span class="language-xml"># åŒ…è£¹è·¯ç”±ï¼ˆ3.0çš„å†™æ³•æœ‰å˜æ›´ï¼‰keyéœ€è¦ç»‘å®šåˆ°componentä¸­</span><br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">router-view</span> <span class="hljs-attr">v-slot</span>=<span class="hljs-string">&quot;</span></span></span><span class="hljs-template-variable">&#123; Component &#125;</span><span class="language-xml"><span class="hljs-tag"><span class="hljs-string">&quot;</span>&gt;</span></span><br><span class="language-xml">    <span class="hljs-tag">&lt;<span class="hljs-name">keep-alive</span> <span class="hljs-attr">:include</span>=<span class="hljs-string">[a,b]</span>&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;<span class="hljs-name">component</span> <span class="hljs-attr">:is</span>=<span class="hljs-string">&quot;Component&quot;</span> <span class="hljs-attr">:key</span>=<span class="hljs-string">&quot;$route.fullPath&quot;</span>/&gt;</span></span><br><span class="language-xml">    <span class="hljs-tag">&lt;/<span class="hljs-name">keep-alive</span>&gt;</span></span><br><span class="language-xml"><span class="hljs-tag">&lt;/<span class="hljs-name">router-view</span>&gt;</span></span><br></code></pre></div></td></tr></table></figure><h2 id="é¡¹ç›®å®æˆ˜"><a href="#é¡¹ç›®å®æˆ˜" class="headerlink" title="é¡¹ç›®å®æˆ˜"></a>é¡¹ç›®å®æˆ˜</h2><p>æ— å›¾è¨€åµğŸ¤’ï¼Œç®€å•çœ‹ä¸€ä¸‹æˆ‘ä»¬æœ€ç»ˆå®ç°çš„æ•ˆæœ<br><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/95bb65d3b7664cedb3cd2688bb392482~tplv-k3u1fbpfcp-zoom-1.image" srcset="/img/loading.gif" lazyload></p><p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/e7df2f366db94b77b8660030345758a6~tplv-k3u1fbpfcp-zoom-1.image" srcset="/img/loading.gif" lazyload></p><h2 id="ä¸ä½¿ç”¨keep-aliveçš„æ•ˆæœ"><a href="#ä¸ä½¿ç”¨keep-aliveçš„æ•ˆæœ" class="headerlink" title="ä¸ä½¿ç”¨keep-aliveçš„æ•ˆæœ"></a>ä¸ä½¿ç”¨<code>keep-alive</code>çš„æ•ˆæœ</h2><ul><li>æ‰€æœ‰çš„é¡µé¢éƒ½ä¸ä¼šç¼“å­˜ï¼Œå‡¡æ˜¯æ¶‰åŠåˆ°è·¯ç”±çš„è·³è½¬éƒ½ä¼šæ‰§è¡Œå½“å‰ç»„ä»¶çš„<code>mounted</code>ï¼ŒğŸè¿™æ ·å°±ä¼šæœ‰ä¸€äº›æ€§èƒ½ä¸Šçš„æ¶ˆè€—ï¼Œå¯¼è‡´åŠ è½½è¿‡çš„æ•°æ®è¿˜ä¼šé‡æ–°åŠ è½½è¿›è¡Œæ¸²æŸ“åœ¨è¿›è¡Œä¸Šæ–¹å¯¼èˆªåˆ‡æ¢çš„æ—¶å€™ä¸ä¼šç¼“å­˜ä¹‹å‰å¡«å†™çš„æ•°æ®ğŸ§§ã€‚</li></ul><h2 id="æ‰€æœ‰éƒ½ä½¿ç”¨äº†keep-aliveçš„æ•ˆæœ"><a href="#æ‰€æœ‰éƒ½ä½¿ç”¨äº†keep-aliveçš„æ•ˆæœ" class="headerlink" title="æ‰€æœ‰éƒ½ä½¿ç”¨äº†keep-aliveçš„æ•ˆæœ"></a>æ‰€æœ‰éƒ½ä½¿ç”¨äº†<code>keep-alive</code>çš„æ•ˆæœ</h2><ul><li>æ¯ä¸ªé¡µé¢çš„ç¬¬ä¸€æ¬¡éƒ½ä¼šæ‰§è¡Œ<code>mounted</code>ï¼ŒğŸ§¤ä¹‹åå†æ¬¡è®¿é—®è¯¥é¡µé¢ä¼šè¿›å…¥ç¼“å­˜,å¯¼è‡´æˆ‘ä»¬åœ¨å…³é—­çš„æ—¶å€™ä¸ä¼šæ‰§è¡Œç»„ä»¶çš„é”€æ¯ï¼ŒåŠ è½½çš„éƒ½æ˜¯ç¬¬ä¸€æ¬¡åŠ è½½çš„æ•°æ®ï¼Œæ–°æ•°æ®ä¸€ç›´æ— æ³•æ¸²æŸ“ğŸ¦ºã€‚</li></ul><h2 id="ä½¿ç”¨äº†keep-alive-é€šè¿‡includeå’Œvuexæ§åˆ¶ç¼“å­˜"><a href="#ä½¿ç”¨äº†keep-alive-é€šè¿‡includeå’Œvuexæ§åˆ¶ç¼“å­˜" class="headerlink" title="ä½¿ç”¨äº†keep-alive é€šè¿‡includeå’Œvuexæ§åˆ¶ç¼“å­˜"></a>ä½¿ç”¨äº†<code>keep-alive</code> é€šè¿‡<code>include</code>å’Œ<code>vuex</code>æ§åˆ¶ç¼“å­˜</h2><blockquote><p>é€šè¿‡è¿™ç§æ–¹å¼å½“æˆ‘ä»¬å¯ä»¥åŠ¨æ€æ§åˆ¶ç¼“å­˜çš„ç»„ä»¶ã€‚</p><ul><li>å½“é¡µé¢å…³é—­çš„æ—¶å€™æˆ‘ä»¬å°†ä¸éœ€è¦ç¼“å­˜çš„ç»„ä»¶ç§»é™¤ğŸ±ï¼Œç§»é™¤ä¹‹åä¼šæ‰§è¡Œç»„ä»¶çš„é”€æ¯ç”Ÿå‘½å‘¨æœŸğŸ¥‚ï¼Œåœ¨æ‰“å¼€ä¹‹å‰çš„é¡µé¢ä¼šé‡æ–°æ¸²æŸ“æœ‰äº›æ—¶å€™è¿™æ ·å°±å·²ç»å®Œç¾äº†ğŸŸã€‚</li><li>ä½†æ˜¯äº‹æƒ…æ€»æ˜¯äº‹ä¸æ„¿è¿ï¼Œæ¯”å¦‚ä¸Šå›¾ä¸­çš„ç¼–è¾‘ğŸ˜´ï¼Œä»–ä»¬æ˜¯ä¸åŒçš„è·¯ç”±ä½†æ˜¯æŒ‡å‘çš„ç»„ä»¶æ˜¯åŒä¸€ä¸ªï¼ˆç»„ä»¶<code>name</code>è‚¯å®šæ˜¯ç›¸åŒçš„ï¼‰ğŸ¤¢ï¼Œè¿™æ ·å°±ä¼šå¯¼è‡´æˆ‘ä»¬åŒæ—¶æ‰“å¼€ä¸¤ä¸ªç¼–è¾‘é¡µé¢çš„æ—¶å€™,æ¯æ¬¡åŠ è½½éƒ½æ˜¯ç¬¬ä¸€æ¬¡çš„æ•°æ®ğŸ˜£ã€‚</li></ul></blockquote><h2 id="æœ€ç»ˆæ–¹æ¡ˆï¼škeep-alive-ä¸­çš„include-router-viewä¸­key"><a href="#æœ€ç»ˆæ–¹æ¡ˆï¼škeep-alive-ä¸­çš„include-router-viewä¸­key" class="headerlink" title="æœ€ç»ˆæ–¹æ¡ˆï¼škeep-alive ä¸­çš„include + router-viewä¸­key"></a>æœ€ç»ˆæ–¹æ¡ˆï¼škeep-alive ä¸­çš„<strong>include</strong> + router-viewä¸­<strong>key</strong></h2><blockquote><p>æˆ‘ä»¬åœ¨ä¸Šé¢å·²ç»æåˆ°äº†<code>router-view</code>ä¸­<code>key</code>çš„ä½œç”¨ğŸŠï¼Œæ‰€ä»¥æˆ‘ä»¬åªéœ€è¦åœ¨<code>router-view</code>ç»‘å®š<code>key</code>ä¸º<code>&quot;$route.fullPage&quot;</code>ğŸ¥‚<strong>å¦‚æœæ˜¯vue3.xéœ€è¦å°†keyå€¼ç»‘å®šè‡³componentä¸Š</strong>ğŸ¥‚ è¿™æ ·æˆ‘ä»¬åœ¨ç‚¹å‡»åˆ—è¡¨ä¸åŒé¡¹çš„ç¼–è¾‘çš„æ—¶å€™æ¯æ¬¡èµ°çš„éƒ½æ˜¯æœ€æ–°çš„æ•°æ®ğŸ¯ï¼ŒåŒæ—¶æˆ‘ä»¬ä½¿ç”¨äº†<code>keep-alive</code>ä¸­çš„<code>include</code> ä¸Šæ–¹ä¸¤ä¸ªç¼–è¾‘é¡µè¿›è¡Œåˆ‡æ¢çš„æ—¶å€™å°±ä¼šèµ°ç¼“å­˜ğŸ»ï¼Œä¸è¿›è¡Œé¡µé¢çš„åŠ è½½ğŸµã€‚</p></blockquote><h2 id="vue3-x-è®¾ç½®name"><a href="#vue3-x-è®¾ç½®name" class="headerlink" title="vue3.x è®¾ç½®name"></a><code>vue3.x</code> è®¾ç½®<code>name</code></h2><p><code>&lt;script setup&gt;</code>æ˜¯åœ¨å•æ–‡ä»¶ç»„ä»¶ <code>(SFC)</code>ä¸­ä½¿ç”¨ç»„åˆå¼<code>API</code> çš„ç¼–è¯‘æ—¶è¯­æ³•ç³–ã€‚</p><blockquote><ul><li>æˆ‘ä»¬åœ¨å®šä¹‰å˜é‡çš„æ—¶å€™ä¸éœ€è¦åœ¨ä½¿ç”¨data</li><li>æ–¹æ³•ä¸éœ€è¦åœ¨ä½¿ç”¨methodså¯ä»¥ç›´æ¥åœ¨æ ‡ç­¾å†…å®šä¹‰å˜é‡å’Œæ–¹æ³•ã€‚</li></ul></blockquote><p><code>kepp-alive</code>ä¸­<code>include</code>éœ€è¦ç»„ä»¶<code>name</code>ï¼Œåœ¨vue3.xä¸­å¦‚ä½•å®šä¹‰<code>name</code>å˜é‡å‘¢?</p><blockquote><p>åœ¨<code>Vue3.x</code>ä¼šæ ¹æ®æ–‡ä»¶åæ¨æ–­ç»„ä»¶çš„ <code>name</code>ä¹Ÿå°±æ˜¯è¯´ç»„ä»¶çš„æ–‡ä»¶åå¯¹åº”çš„å°±æ˜¯<code>name</code>ğŸ˜˜ï¼Œå¦‚æœä½ ç‰¹åˆ«å€”ğŸ¤£ï¼Œæˆ‘å°±æ˜¯æƒ³å®šä¹‰ç»„ä»¶çš„åç§°ä¹Ÿä¸æ˜¯æ²¡æœ‰åŠæ³•çš„ğŸŒ¯ã€‚</p><ol><li>å†™ä¸¤ä¸ª <code>script</code> æ ‡ç­¾</li><li>å¦‚æœæ˜¯é€šè¿‡viteæ„å»ºçš„é¡¹ç›®å¯ä»¥é€šè¿‡æ’ä»¶çš„æ–¹å¼ï¼ˆ<code>vite-plugin-vue-setup-extend</code>ï¼‰ã€‚</li></ol></blockquote><p>1.å¤šä¸ª<code>script</code>æ ‡ç­¾</p><figure class="highlight xml"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="language-javascript"></span><br><span class="language-javascript">    <span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> &#123;</span><br><span class="language-javascript">        <span class="hljs-attr">name</span>: <span class="hljs-string">&#x27;demo&#x27;</span></span><br><span class="language-javascript">    &#125;</span><br><span class="language-javascript"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">setup</span>&gt;</span><span class="language-javascript"></span><br><span class="language-javascript">    <span class="hljs-comment">// do something...</span></span><br><span class="language-javascript"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br></code></pre></div></td></tr></table></figure><ol start="2"><li><code>vite</code>æ„å»ºæ’ä»¶å¼•ç”¨</li></ol><figure class="highlight coffeescript"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs coffeescript"><span class="hljs-comment"># å®‰è£…</span><br><span class="hljs-built_in">npm</span> i vite-plugin-vue-setup-extend -D<br><span class="hljs-comment"># é…ç½® vite.config.ts </span><br><span class="hljs-keyword">import</span> &#123; defineConfig &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;vite&#x27;</span><br><span class="hljs-keyword">import</span> VueSetupExtend <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;vite-plugin-vue-setup-extend&#x27;</span><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> defineConfig(&#123;<br>  plugins: [ VueSetupExtend()]<br>&#125;)<br><span class="hljs-comment"># ä½¿ç”¨</span><br>&lt;script lang=<span class="hljs-string">&quot;ts&quot;</span> setup name=<span class="hljs-string">&quot;demo&quot;</span>&gt;<br><br>&lt;/script&gt;<br></code></pre></div></td></tr></table></figure><h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><p>å½“åˆå°±æ˜¯å› ä¸ºå¯¹<code>keep-alive</code>çš„æŒæ¡ä¸å¤Ÿé€å½»åªæ˜¯çŸ¥é“æ˜¯ä»€ä¹ˆä¸œè¥¿ğŸ„ï¼Œåœ¨çœŸæ­£çš„é¡¹ç›®ä¸­ä½¿ç”¨æ‰ä¼šå‘ç°æœ‰å¾ˆå¤šé—®é¢˜,å…„å¼Ÿä»¬å‘Šè¾ä¸‹æ¬¡è§ğŸ¥¤ï¼Œç¨å¾®æœ‰ç‚¹ä½œç”¨å°±ä¸‰è¿ä¸€ä¸‹å“¦ğŸ¤‘ï¼Œæœ‰é”™è¯¯çš„åœ°æ–¹å°½ç®¡åœ¨è¯„è®ºåŒºå±•ç¤ºè¯­è¨€ğŸ˜ã€‚</p><p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/2e35c0c3a3b445edbbffb7fc80d3c305~tplv-k3u1fbpfcp-zoom-1.image" srcset="/img/loading.gif" lazyload></p><h2 id="å‚è€ƒæ–‡ç« "><a href="#å‚è€ƒæ–‡ç« " class="headerlink" title="å‚è€ƒæ–‡ç« "></a>å‚è€ƒæ–‡ç« </h2><p><a target="_blank" rel="noopener" href="https://www.zhihu.com/question/500937713">vue3.2 script setupå®šä¹‰çš„ç»„ä»¶å¦‚ä½•å‘½åï¼Ÿ</a></p><p><a target="_blank" rel="noopener" href="https://cn.vuejs.org/index.html">Vue2å®˜ç½‘</a></p><p><a target="_blank" rel="noopener" href="https://v3.cn.vuejs.org/guide/introduction.html">Vue3å®˜ç½‘</a></p></div><hr><div><div class="post-metas mb-3"><div class="post-meta mr-3"><i class="iconfont icon-category"></i> <a class="hover-with-bg" href="/categories/%E6%8A%80%E6%9C%AF/">æŠ€æœ¯</a></div><div class="post-meta"><i class="iconfont icon-tags"></i> <a class="hover-with-bg" href="/tags/Vue/">Vue</a> <a class="hover-with-bg" href="/tags/uni-app/">uni-app</a></div></div><p class="note note-warning">æœ¬åšå®¢æ‰€æœ‰æ–‡ç« é™¤ç‰¹åˆ«å£°æ˜å¤–ï¼Œå‡é‡‡ç”¨ <a target="_blank" href="https://creativecommons.org/licenses/by-sa/4.0/deed.zh" rel="nofollow noopener noopener">CC BY-SA 4.0 åè®®</a> ï¼Œè½¬è½½è¯·æ³¨æ˜å‡ºå¤„ï¼è°¢è°¢</p><div class="post-prevnext"><article class="post-prev col-6"><a href="/2022/05/17/%E5%89%8D%E7%AB%AF%E5%9F%8B%E7%82%B9%E5%AE%9E%E7%8E%B0%E6%96%B9%E6%A1%88/"><i class="iconfont icon-arrowleft"></i> <span class="hidden-mobile">å‰ç«¯åŸ‹ç‚¹å®ç°æ–¹æ¡ˆ</span> <span class="visible-mobile">ä¸Šä¸€ç¯‡</span></a></article><article class="post-next col-6"><a href="/2022/05/17/electron%E8%B0%83%E7%94%A8%E7%AC%AC%E4%B8%89%E6%96%B9dll/"><span class="hidden-mobile">electronè°ƒç”¨ç¬¬ä¸‰æ–¹dll</span> <span class="visible-mobile">ä¸‹ä¸€ç¯‡</span> <i class="iconfont icon-arrowright"></i></a></article></div></div><article class="comments" id="comments" lazyload><script type="text/javascript">Fluid.utils.loadComments("#comments",(function(){var t=document.documentElement.getAttribute("data-user-color-scheme");t="dark"===t?"github-dark":"github-light",window.UtterancesThemeLight="github-light",window.UtterancesThemeDark="github-dark";var e=document.createElement("script");e.setAttribute("src","https://utteranc.es/client.js"),e.setAttribute("repo","drinkwd/drinkwd.github.io"),e.setAttribute("issue-term","title"),e.setAttribute("label","utterances"),e.setAttribute("theme",t),e.setAttribute("crossorigin","anonymous"),document.getElementById("comments").appendChild(e)}))</script><noscript>Please enable JavaScript to view the comments</noscript></article></article></div></div></div><div class="d-none d-lg-block col-lg-2 toc-container" id="toc-ctn"><div id="toc"><p class="toc-header"><i class="iconfont icon-list"></i>&nbsp;ç›®å½•</p><div class="toc-body" id="toc-body"></div></div></div></div></div><a id="scroll-top-button" aria-label="TOP" href="#" role="button"><i class="iconfont icon-arrowup" aria-hidden="true"></i></a><div class="modal fade" id="modalSearch" tabindex="-1" role="dialog" aria-labelledby="ModalLabel" aria-hidden="true"><div class="modal-dialog modal-dialog-scrollable modal-lg" role="document"><div class="modal-content"><div class="modal-header text-center"><h4 class="modal-title w-100 font-weight-bold">æœç´¢</h4><button type="button" id="local-search-close" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button></div><div class="modal-body mx-3"><div class="md-form mb-5"><input type="text" id="local-search-input" class="form-control validate"> <label data-error="x" data-success="v" for="local-search-input">å…³é”®è¯</label></div><div class="list-group" id="local-search-result"></div></div></div></div></div></main><footer class="text-center mt-5 py-3"><div class="footer-content"><a href="https://github.com/drinkwd" target="_blank" rel="nofollow noopener"><span>gitHub</span></a> <i class="iconfont icon-love"></i> <a href="https://juejin.cn/user/3632442148403879" target="_blank" rel="nofollow noopener"><span>æ˜é‡‘</span></a></div><div class="statistics"><span id="busuanzi_container_site_pv" style="display:none">æ€»è®¿é—®é‡ <span id="busuanzi_value_site_pv"></span> æ¬¡ </span><span id="busuanzi_container_site_uv" style="display:none">æ€»è®¿å®¢æ•° <span id="busuanzi_value_site_uv"></span> äºº</span></div></footer><script src="https://cdn.staticfile.org/nprogress/0.2.0/nprogress.min.js"></script><link rel="stylesheet" href="https://cdn.staticfile.org/nprogress/0.2.0/nprogress.min.css"><script>NProgress.configure({showSpinner:!1,trickleSpeed:100}),NProgress.start(),window.addEventListener("load",(function(){NProgress.done()}))</script><script src="https://cdn.staticfile.org/jquery/3.5.1/jquery.min.js"></script><script src="https://cdn.staticfile.org/bootstrap/4.5.3/js/bootstrap.min.js"></script><script src="/js/events.js"></script><script src="/js/plugins.js"></script><script src="/js/local-search.js"></script><script src="/js/img-lazyload.js"></script><script src="https://cdn.staticfile.org/tocbot/4.12.0/tocbot.min.js"></script><script src="https://cdn.staticfile.org/fancybox/3.5.7/jquery.fancybox.min.js"></script><script src="https://lf6-cdn-tos.bytecdntp.com/cdn/expire-1-M/anchor-js/4.3.0/anchor.min.js"></script><script defer src="https://cdn.staticfile.org/clipboard.js/2.0.6/clipboard.min.js"></script><script defer src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script src="https://cdn.staticfile.org/typed.js/2.0.12/typed.min.js"></script><script>!function(t,i){(0,Fluid.plugins.typing)(i.getElementById("subtitle").title)}(window,document)</script><script src="/live2d-widget/autoload.js"></script><script src="/js/boot.js"></script><div id="aplayer" style="right:0"></div><link defer rel="stylesheet" href="https://cdn.staticfile.org/aplayer/1.10.1/APlayer.min.css"><script src="https://cdn.staticfile.org/aplayer/1.10.1/APlayer.min.js"></script><script defer src="/js/music.js"></script></body></html>